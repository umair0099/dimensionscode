<?xml version="1.0" encoding="utf-8"?>

<odoo>
	<data>

		<record model="ir.ui.view" id="view_inherit_part_view_11">
			<field name="name">partner.res.view.one</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='vat']" position="after">
					<field name="warehouse_loc_id" string="Location" attrs="{'invisible':[('type','!=','delivery')]}"/>
					<field name="distance_km" string="Distance" attrs="{'invisible':[('type','!=','delivery')]}"/>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="view_location_stock_inh_fleet">
			<field name="name">location.stock.inherit.one</field>
			<field name="model">stock.location</field>
			<field name="inherit_id" ref="stock.view_location_form"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='putaway_strategy_id']" position="after">
					<field name="address_stock" string="Address" />
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="view_fleet_vehicle_inherit_one">
			<field name="name">fleet.vehicle.view.one</field>
			<field name="model">fleet.vehicle</field>
			<field name="inherit_id" ref="fleet.fleet_vehicle_view_form"/>
			<field name="arch" type="xml">

				<xpath expr="//field[@name='driver_id']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='location']" position="before">
					<field name="vehicle_type" string="Vehicle Type" required="1"/>
					<field name="custom_driver_id" string="Driver" />
				</xpath>
			</field>
		</record>

		<record id="view_trip_reimbursement_form_view" model="ir.ui.view">
			<field name="name">trip.reimbursement.view</field>
			<field name="model">trip.reimbursement</field>
			<field name="arch" type="xml">
				<form string="Trip Reimbursement">
					<header>
						<button name="action_submit" string="Submit" type='object' class='oe_highlight' states="draft" groups="fleet_customizations.group_fleet_submit"/>
						<button name="action_fm_approval" string="FM Approval" type='object' class='oe_highlight' states="submitted" groups="fleet_customizations.group_fleet_fm_manager"/>
						<button name="action_hr_approval" string="HR Approval" type='object' class='oe_highlight' states="fm_approval" groups="fleet_customizations.group_fleet_hr_approval"/>
						<button name="action_confirm" string="Confirm" type='object' class='oe_highlight' states="hr_approval" groups="fleet_customizations.group_fleet_confirm"/>
						<button name="action_reject" string="Reject" type='object' states="submitted,fm_approval,hr_approval" groups="fleet_customizations.group_fleet_hr_reject"/>
						<button name="action_set_to_draft" string="Set to draft" type='object' states="reject" groups="fleet_customizations.group_fleet_set_to_draft"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,submitted,fm_approval,hr_approval,confirm,reject" />
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button class="oe_stat_button" name="action_payment_view" string="Payment" attrs="{'invisible':[('is_payment','=',False)]}" type="object" icon="fa-bars"/>

						</div>
						<div class="oe_title">
							<h1>
								<field name="name" readonly="1"/>
							</h1>
						</div>
						<group colspan="2" col="2">
							<group string="Driver Information">
								<field name="reimbursement_type" invisible="1" />
								<field name="is_payment" invisible="1" />
								<field name="driver_id" options="{'no_create':True}" string="Driver" attrs="{'readonly':[('state','!=','draft')]}" />
								<field name="manager_id" string="Manager" readonly="1" />
								<field name="department_id" string="Department" readonly="1" />
								<field name="nationality" string="Nationality" readonly="1" />
								<field name="job_position" string="Job Position" readonly="1" />
								<field name="currency_id" invisible="1" />
								<field name="company_id" readonly="1"/>
							</group>
							<group string="Trip Information">
								<field name="request_date" string="Request Date" attrs="{'readonly':[('state','!=','draft')]}" />
								<field name="vehicle_type" string="Vehicle Type" attrs="{'readonly':[('state','!=','draft')]}" />
								<field name="vehicle_id" options="{'no_create':True}" string="Vehicle" attrs="{'readonly':[('state','!=','draft')]}" />
								<field name="license_plate" string="License Plate" readonly="1" />
								<field name="chasis_no" string="Chassis No." readonly="1" />
								<label for="last_odometer" string="Last Odometer"/>
								<div class="o_row">
									<field name="last_odometer" readonly="1"/>
									<field name="odometer_unit" readonly="1"/>
								</div>
								<field name="trip_attachment" attrs="{'readonly':[('state','=','confirm')]}" string="Attachment" />
							</group>
						</group>

						<group string="Trip Lines" attrs="{'invisible':[('reimbursement_type','=','trip')]}">
							<field name="trip_lines_fuel" attrs="{'readonly':[('state','!=','draft')]}" nolabel="1">
								<form>
									<group colspan="2" col="2">
										<group>
											<field name="trip_date" string="Trip Date" />
											<field name="trip_type" required="1" />
											<field name="delivery_id" options="{'no_create':True}" attrs="{'invisible':[('trip_type','=','service')],'required':[('trip_type','in',['delivery','transfer'])]}" string="Delivery"/>
											<field name="from_location" />
											<field name="from_address" string="Origin Address" />
											<field name="shipping_partner_id" options="{'no_create':True}" attrs="{'invisible':[('trip_type','in',['service','transfer'])],'required':[('trip_type','=','delivery')]}" />
											<field name="to_address" string="Destination Address" />
										</group>
										<group>
											<field name="opening_millage" />
											<field name="closing_millage" />
											<field name="difference_millage" />
											<field name="trip_amount" />
											<field name="invoice_no" />
											<field name="trip_line_attachment" string="Attachment"/>
											<field name="comments" string="Note" />
										</group>
									</group>
								</form>
								<tree>
									<field name="trip_date" string="Trip Date" />
									<field name="trip_type" required="1" />
									<field name="delivery_id" options="{'no_create':True}" attrs="{'invisible':[('trip_type','=','service')]}" string="Delivery"/>
									<field name="from_location" />
									<field name="from_address" string="Origin Address" />
									<field name="to_address" string="Destination Address" />
									<field name="opening_millage" />
									<field name="closing_millage" />
									<field name="difference_millage" />
									<field name="trip_amount" />
									<field name="invoice_no" />
									<field name="trip_line_attachment" string="Attachment"/>
									<field name="comments" string="Note" />
								</tree>
							</field>
						</group>
						<group string="Trip Lines" attrs="{'invisible':[('reimbursement_type','=','fuel')]}">
							<field name="trip_lines" attrs="{'readonly':[('state','!=','draft')]}" nolabel="1">
								<form>
									<group colspan="2" col="2">
										<group>
											<field name="trip_date" string="Trip Date" />
											<field name="trip_type" required="1" />
											<field name="delivery_id" options="{'no_create':True}" attrs="{'invisible':[('trip_type','=','service')],'required':[('trip_type','in',['delivery','transfer'])]}" string="Delivery"/>
											<field name="from_location" />
											<field name="from_address" string="Origin Address" />
											<field name="shipping_partner_id" options="{'no_create':True}" attrs="{'invisible':[('trip_type','in',['service','transfer'])],'required':[('trip_type','=','delivery')]}" />
											<field name="to_address" string="Destination Address" />
										</group>
										<group>
											<field name="trip_distance" />
											<field name="additional_distance" />
											<field name="trip_amount" />
											<field name="invoice_no" />
											<field name="trip_line_attachment" string="Attachment"/>
											<field name="comments" string="Note" />
										</group>
									</group>
								</form>
								<tree decoration-danger="additional_distance&gt;0.0">
									<field name="trip_date" string="Trip Date" />
									<field name="trip_type" required="1" />
									<field name="delivery_id" options="{'no_create':True}" attrs="{'invisible':[('trip_type','=','service')]}" string="Delivery"/>
									<field name="from_location" />
									<field name="from_address" string="Origin Address" />
									<field name="to_address" string="Destination Address" />
									<field name="trip_distance" />
									<field name="trip_amount" />
									<field name="additional_distance" />
									<field name="invoice_no" />
									<field name="trip_line_attachment" string="Attachment"/>
									<field name="comments" string="Note" />
								</tree>
							</field>
						</group>
						<group class="oe_subtotal_footer">
							<field name="amount_total" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
						</group>
						<field name="note" class="oe_inline" placeholder="Terms and conditions........."/>
						<div class="oe_clear"/>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>
		<record id="view_trip_reimbursement_tree_view" model="ir.ui.view">
			<field name="name">trip.reimbursement.view.tree</field>
			<field name="model">trip.reimbursement</field>
			<field name="arch" type="xml">
				<tree decoration-muted="state=='reject'" string="Trip Reimbursement">
					<field name="name" string="Reference"/>
					<field name="driver_id" string="Driver"/>
					<field name="request_date" string="Request Date"/>
					<field name="vehicle_type" string="Vehicle Type" />
					<field name="vehicle_id" string="Vehicle" />
					<field name="license_plate" string="License Plate" />
					<field name="amount_total" string="Amount Total" sum="Total" />
					<field name="state" string="State" />
				</tree>
			</field>
		</record>

		<record id="view_trip_reimbursement_filter" model="ir.ui.view">
			<field name="name">filter.trip.reimbursement</field>
			<field name="model">trip.reimbursement</field>
			<field name="priority" eval="15"/>
			<field name="arch" type="xml">
				<search string="Search Trip Reimbursement">
					<field name="name" string="Reference" />
					<field name="driver_id" string="Driver Name" />
					<field name="vehicle_id" string="Vehicle Name"/>
					<group expand="0" string="Group By">
						<filter string="Vehicle" name="vehicle_id" domain="[]" context="{'group_by': 'vehicle_id'}"/>
						<filter string="Driver" name="driver_id" domain="[]" context="{'group_by': 'driver_id'}"/>
						<filter string="Request Date" name="request_date" domain="[]" context="{'group_by': 'request_date'}"/>
						<filter string="State" name="state" domain="[]" context="{'group_by': 'state'}"/>
					</group>
				</search>
			</field>
		</record>

		<record id="action_trip_reimbursement" model="ir.actions.act_window">
			<field name="name">Trip Allowance</field>
			<field name="res_model">trip.reimbursement</field>
			<field name="context">{'default_reimbursement_type': 'trip'}</field>
			<field name="domain">[('reimbursement_type','=','trip')]</field>
			<field name="view_mode">tree,form</field>
			<field name="view_type">form</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Create a new trip reimbursement
				</p></field>
		</record>

		<record id="action_fuel_reimbursement" model="ir.actions.act_window">
			<field name="name">Fuel Allowance</field>
			<field name="res_model">trip.reimbursement</field>
			<field name="context">{'default_reimbursement_type': 'fuel'}</field>
			<field name="domain">[('reimbursement_type','=','fuel')]</field>
			<field name="view_mode">tree,form</field>
			<field name="view_type">form</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Create a new trip reimbursement
				</p></field>
		</record>

		<menuitem
				id="menu_trip_reimbursement_menu"
				name="Reimbursement"
				parent="fleet.menu_root" sequence="5"
		/>
		<menuitem
				id="menu_trip_reimbursement_menu_child"
				name="Trip Allowance"
				parent="fleet_customizations.menu_trip_reimbursement_menu" sequence="5"
				action="action_trip_reimbursement"
		/>
		<menuitem
				id="menu_fuel_reimbursement_menu_child"
				name="Fuel Allowance"
				parent="fleet_customizations.menu_trip_reimbursement_menu" sequence="10"
				action="action_fuel_reimbursement"
		/>
		<!--Trip Configuration -->

		<record id='view_trip_configuration_form' model='ir.ui.view'>
			<field name="name">trip.configuration.form.view</field>
			<field name="model">trip.configuration</field>
			<field name="arch" type="xml">
				<form string="Trip Configuration">
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" required="1"/>
							</h1>
						</div>
						<group colspan="2" col="4">
							<field name="company_id" readonly="1"/>
						</group>
						<group string="Trip Amount Configuration">
							<field name="trip_config_ids" nolabel="1">
								<tree editable="bottom">
									<field name="vehicle_type" required="1"/>
									<field name="km_range" required="1"/>
									<field name="km_value" required="1" />
									<field name="type_rate" required="1" />
									<field name="fixed_amount" attrs="{'invisible':[('type_rate','=','percentage')],'required':[('type_rate','=','fixed')]}"/>
									<field name="fixed_percentage" attrs="{'invisible':[('type_rate','=','fixed')],'required':[('type_rate','=','percentage')]}"/>
									<field name="comment" string="Note" />
								</tree>
							</field>
						</group>
						<group string="Fuel Amount Configuration">
							<field name="fuel_config_ids" nolabel="1">
								<tree editable="bottom">
									<field name="vehicle_type" required="1"/>
									<field name="km_range" required="1"/>
									<field name="km_value" required="1" />
									<field name="type_rate" required="1" />
									<field name="km_per_liter" required="1" />
									<field name="fixed_amount" attrs="{'invisible':[('type_rate','=','percentage')],'required':[('type_rate','=','fixed')]}"/>
									<field name="fixed_percentage" attrs="{'invisible':[('type_rate','=','fixed')],'required':[('type_rate','=','percentage')]}"/>
									<field name="comment" string="Note" />
								</tree>

							</field>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_trip_configuration_tree" model="ir.ui.view">
			<field name="name">trip.configuration.view.tree</field>
			<field name="model">trip.configuration</field>
			<field name="arch" type="xml">
				<tree string="Trip Configuration">
					<field name="name" />
					<field name="company_id" string="Company" />
					<field name="trip_config_ids" />
				</tree>
			</field>
		</record>

		<record id="action_trip_configuration" model="ir.actions.act_window">
			<field name="name">Trip Configuration</field>
			<field name="res_model">trip.configuration</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem id="menu_trip_config" parent="fleet.fleet_configuration"
				  name="Trip Configuration" sequence="20" action="action_trip_configuration" />
	</data>
</odoo>